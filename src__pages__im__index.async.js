"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[704,521,750,418,681,975,619],{22833:function(P,e,n){n.r(e),n.d(e,{default:function(){return x}});var f=n(52510),a=n.n(f),S=n(84875),l=n.n(S),c={avatar:"avatar___V3O9H"},m=n(62086),i;(function(t){t.CIRCLE="circle",t.SQUARE="square"})(i||(i={}));function x(t){var E=t.info.shape===i.SQUARE,s=l()({"h-8":!0,"w-8":!0,"min-w-max":!0}),h=l()(a()({"h-full w-8 bg-sky-400 content-center":!0,rounded:E,"rounded-full":!E},c.avatar,!0));if(t.info.avatar)return(0,m.jsx)("div",{className:s,children:(0,m.jsx)("img",{className:"h-full w-full",src:t.info.avatar})});var y=(t.info.nickname||t.info.name)[0];return(0,m.jsx)("div",{className:s,children:(0,m.jsx)("div",{className:h,children:y})})}},83773:function(P,e,n){n.r(e),n.d(e,{IN:function(){return f}});var f="in"},80038:function(P,e,n){n.r(e),n.d(e,{default:function(){return E}});var f=n(52510),a=n.n(f),S=n(84875),l=n.n(S),c={box:"box___k83VP",msgBox:"msgBox___CLTFk",in:"in___FxKfJ",out:"out___dQC37",system:"system___fGfxg",systemText:"systemText___emM3a"},m=n(87848),i=n(83773),x=n(22833),t=n(62086);function E(s){var h;if(s.message.type===m.MessageType.SYSTEM)return typeof s.message.message!="string"?null:(0,t.jsx)("div",{className:c.system,children:(0,t.jsx)("div",{className:c.systemText,children:s.message.message})});var y=s.message.sendType===i.IN,r=l()((h={},a()(h,c.in,y),a()(h,c.out,!y),a()(h,c.box,!0),h)),A=l()({"flex flex-col":!0,"ml-2":y,"mr-2":!y}),C=l()({"text-xs text-gray-300":!0,"text-right":!y}),o=s.member.nickname||s.member.name;return(0,t.jsxs)("div",{className:r,children:[(0,t.jsx)(x.default,{info:s.member}),(0,t.jsxs)("div",{className:A,children:[(0,t.jsx)("p",{className:C,children:o}),(0,t.jsx)("div",{className:c.msgBox,children:s.children})]})]})}},78318:function(P,e,n){n.r(e),n.d(e,{default:function(){return A}});var f=n(49084);function a(C,o,O){var M=C==null?void 0:(0,f.Z)(C,o);return M===void 0?O:M}var S=a,l=n(80038),c=n(23336),m=n(93588),i=n(94338),x=n(98857),t=n(74183),E=n(84544),s=n(74229),h=n(53056),y=n(75524),r=n(62086);function A(C){return S(C.list,"length")?(0,r.jsx)("div",{className:"p-4",children:C.list.map(function(o){var O=C.members.find(function(M){return M.id===o.sendId})||{id:String(+new Date),name:""};return(0,r.jsx)(l.default,{member:O,message:o,children:{system:(0,r.jsx)(c.default,{message:o}),text:(0,r.jsx)(m.default,{message:o}),voice:(0,r.jsx)(i.default,{message:o}),video:(0,r.jsx)(x.default,{message:o}),file:(0,r.jsx)(t.default,{message:o}),robot:(0,r.jsx)(E.default,{message:o}),richtext:(0,r.jsx)(s.default,{message:o}),quote:(0,r.jsx)(h.default,{message:o}),img:(0,r.jsx)(y.default,{message:o})}[o.type]},o.uuid)})}):null}},23336:function(P,e,n){n.r(e),n.d(e,{default:function(){return a}});var f=n(62086);function a(S){return(0,f.jsx)("div",{})}},24552:function(P,e,n){n.r(e),n.d(e,{default:function(){return p}});var f=n(54306),a=n.n(f),S=n(12342),l=n.n(S),c=n(57213),m=n.n(c),i=n(93236),x=n(22018),t=n(22978),E=n(48721),s=n(61793),h=n(85108),y=n(6420),r=n(79766),A=n(93900),C=n(80382),o=n(66680),O=n(88825),M={editor:"editor___AcobX",emojiBox:"emojiBox___OCwv_",count:"count___gjETG",counterOverLimit:"counterOverLimit___m7ZyI"},V={mention:"mention___e08UF",mentionSuggestions:"mentionSuggestions___xV0Oy",mentionSuggestionsEntryContainer:"mentionSuggestionsEntryContainer___RS_bu",mentionSuggestionsEntryContainerLeft:"mentionSuggestionsEntryContainerLeft___Obkfm",mentionSuggestionsEntryContainerRight:"mentionSuggestionsEntryContainerRight___aAbxo",mentionSuggestionsEntry:"mentionSuggestionsEntry___c0x64",mentionSuggestionsEntryFocused:"mentionSuggestionsEntryFocused___jKUAV",mentionSuggestionsEntryText:"mentionSuggestionsEntryText___uC5ih",mentionSuggestionsEntryTitle:"mentionSuggestionsEntryTitle___feT0M",mentionSuggestionsEntryAvatar:"mentionSuggestionsEntryAvatar___ar8FJ"},G=n(17607),Q=n(66466),d=n(62086),H=["mention","theme","searchValue","isFocused"],K=(0,s.Z)({useNativeArt:!0}),J=(0,h.Z)(),X=K.EmojiSuggestions,Y=K.EmojiSelect,z=(0,y.Z)({component:function(T){var u=T.href,B=(0,G.Z)(T,["className"]);return(0,d.jsx)("a",m()(m()({},B),{},{style:{color:"#5e93c5",textDecoration:"none"},onClick:function(){return window.open(u,"_blank")}}))}}),F=(0,r.Z)({theme:{counter:M.counter,counterOverLimit:M.counterOverLimit}}),$=F.CharCounter,cn=x.KeyBindingUtil.hasCommandModifier;function b(v){return v.code==="KeyZ"?"undo":v.keyCode===13&&!v.shiftKey?"send-msg":(0,x.getDefaultKeyBinding)(v)}function k(v){var T=v.mention,u=v.theme,B=v.searchValue,I=v.isFocused,L=l()(v,H);return(0,d.jsx)("div",m()(m()({},L),{},{children:(0,d.jsx)("div",{className:u==null?void 0:u.mentionSuggestionsEntryContainer,children:(0,d.jsxs)("div",{className:u==null?void 0:u.mentionSuggestionsEntryContainerRight,children:[(0,d.jsx)("div",{className:u==null?void 0:u.mentionSuggestionsEntryText,children:T.name}),(0,d.jsx)("div",{className:u==null?void 0:u.mentionSuggestionsEntryTitle,children:T.title})]})})}))}function p(){var v=(0,i.useRef)(null),T=(0,i.useState)(function(){return x.EditorState.createEmpty()}),u=a()(T,2),B=u[0],I=u[1],L=(0,i.useState)(!1),D=a()(L,2),w=D[0],q=D[1],_=(0,Q.tT)("im.member"),R=_.members,nn=(0,i.useState)(R),U=a()(nn,2),tn=U[0],en=U[1],Z=(0,i.useMemo)(function(){var g=(0,E.ZP)({entityMutability:"IMMUTABLE",theme:V,mentionPrefix:"@",supportWhitespace:!0}),j=g.MentionSuggestions,N=[g,K,J,z,F];return{plugins:N,MentionSuggestions:j}},[]),sn=Z.MentionSuggestions,an=Z.plugins,on=(0,i.useCallback)(function(g){I(g)},[]),rn=(0,i.useCallback)(function(g){q(g)},[]),un=(0,i.useCallback)(function(g){var j=g.value;en((0,E.zk)(j,R))},[]),ln=function(){var j=v.current.editor.editor.querySelector(".public-DraftStyleDefault-block").innerHTML;console.log("\u{1F680} ~ file: EditComponent.tsx:132 ~ sendMsg ~ ref.current:",j)},mn=function(j){var N=B.getCurrentContent(),W=N.createEntity("IMAGE","IMMUTABLE",{src:j}),gn=W.getLastCreatedEntityKey(),fn=x.EditorState.set(B,{currentContent:W});return x.AtomicBlockUtils.insertAtomicBlock(fn,gn," ")},dn=function(j){var N=URL.createObjectURL(new Blob(j));I(mn(N))},vn=function(j){return j==="send-msg"?(ln(),"handled"):"not-handled"};return(0,d.jsxs)("div",{className:M.editor,onClick:function(){v.current.focus()},children:[(0,d.jsx)("div",{className:M.emojiBox,children:(0,d.jsx)(Y,{})}),(0,d.jsx)(t.ZP,{editorKey:"editor",editorState:B,onChange:on,plugins:an,ref:v,keyBindingFn:b,handleKeyCommand:vn,handlePastedFiles:dn}),(0,d.jsxs)("span",{className:M.count,children:[(0,d.jsx)($,{limit:2e4}),"/20000"]}),(0,d.jsx)(X,{}),(0,d.jsx)(sn,{open:w,onOpenChange:rn,suggestions:tn,onSearchChange:un,onAddMention:function(){},entryComponent:k,popoverContainer:function(j){var N=j.children;return(0,d.jsx)("div",{style:{minWidth:"100px",position:"absolute"},children:N})}})]})}},21716:function(P,e,n){n.r(e),n.d(e,{default:function(){return l}});var f=n(93236),a=n(24552),S=n(62086);function l(){return(0,S.jsx)(a.default,{})}},86751:function(P,e,n){n.r(e),n.d(e,{default:function(){return E}});var f=n(52510),a=n.n(f),S=n(78318),l={box:"box___IpXK4",messages:"messages___GotYm",send:"send___nFnTt"},c=n(21716),m=n(84875),i=n.n(m),x=n(66466),t=n(62086);function E(){var s,h=i()((s={},a()(s,l.send,!0),a()(s,"unreset",!0),s)),y=(0,x.tT)("im.message"),r=y.messages,A=(0,x.tT)("im.member"),C=A.members;return(0,t.jsxs)("div",{className:l.box,children:[(0,t.jsx)("div",{className:l.messages,children:(0,t.jsx)(S.default,{list:r,members:C})}),(0,t.jsx)("div",{className:h,children:(0,t.jsx)(c.default,{})})]})}}}]);
