"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[681,521],{24552:function(B,d,n){n.r(d),n.d(d,{default:function(){return X}});var C=n(54306),m=n.n(C),f=n(12342),h=n.n(f),K=n(57213),c=n.n(K),r=n(93236),g=n(22018),L=n(22978),x=n(48721),F=n(61793),D=n(85108),U=n(6420),R=n(79766),mn=n(93900),gn=n(80382),vn=n(66680),cn=n(88825),v={editor:"editor___AcobX",emojiBox:"emojiBox___OCwv_",count:"count___gjETG",counterOverLimit:"counterOverLimit___m7ZyI"},I={mention:"mention___e08UF",mentionSuggestions:"mentionSuggestions___xV0Oy",mentionSuggestionsEntryContainer:"mentionSuggestionsEntryContainer___RS_bu",mentionSuggestionsEntryContainerLeft:"mentionSuggestionsEntryContainerLeft___Obkfm",mentionSuggestionsEntryContainerRight:"mentionSuggestionsEntryContainerRight___aAbxo",mentionSuggestionsEntry:"mentionSuggestionsEntry___c0x64",mentionSuggestionsEntryFocused:"mentionSuggestionsEntryFocused___jKUAV",mentionSuggestionsEntryText:"mentionSuggestionsEntryText___uC5ih",mentionSuggestionsEntryTitle:"mentionSuggestionsEntryTitle___feT0M",mentionSuggestionsEntryAvatar:"mentionSuggestionsEntryAvatar___ar8FJ"},N=n(17607),Z=n(66466),e=n(62086),W=["mention","theme","searchValue","isFocused"],y=(0,F.Z)({useNativeArt:!0}),p=(0,D.Z)(),b=y.EmojiSuggestions,V=y.EmojiSelect,G=(0,U.Z)({component:function(a){var t=a.href,l=(0,N.Z)(a,["className"]);return(0,e.jsx)("a",c()(c()({},l),{},{style:{color:"#5e93c5",textDecoration:"none"},onClick:function(){return window.open(t,"_blank")}}))}}),j=(0,R.Z)({theme:{counter:v.counter,counterOverLimit:v.counterOverLimit}}),z=j.CharCounter,Sn=g.KeyBindingUtil.hasCommandModifier;function H(i){return i.code==="KeyZ"?"undo":i.keyCode===13&&!i.shiftKey?"send-msg":(0,g.getDefaultKeyBinding)(i)}function J(i){var a=i.mention,t=i.theme,l=i.searchValue,S=i.isFocused,E=h()(i,W);return(0,e.jsx)("div",c()(c()({},E),{},{children:(0,e.jsx)("div",{className:t==null?void 0:t.mentionSuggestionsEntryContainer,children:(0,e.jsxs)("div",{className:t==null?void 0:t.mentionSuggestionsEntryContainerRight,children:[(0,e.jsx)("div",{className:t==null?void 0:t.mentionSuggestionsEntryText,children:a.name}),(0,e.jsx)("div",{className:t==null?void 0:t.mentionSuggestionsEntryTitle,children:a.title})]})})}))}function X(){var i=(0,r.useRef)(null),a=(0,r.useState)(function(){return g.EditorState.createEmpty()}),t=m()(a,2),l=t[0],S=t[1],E=(0,r.useState)(!1),M=m()(E,2),Q=M[0],Y=M[1],$=(0,Z.tT)("im.member"),P=$.members,k=(0,r.useState)(P),A=m()(k,2),w=A[0],_=A[1],O=(0,r.useMemo)(function(){var o=(0,x.ZP)({entityMutability:"IMMUTABLE",theme:I,mentionPrefix:"@",supportWhitespace:!0}),s=o.MentionSuggestions,u=[o,y,p,G,j];return{plugins:u,MentionSuggestions:s}},[]),q=O.MentionSuggestions,nn=O.plugins,tn=(0,r.useCallback)(function(o){S(o)},[]),en=(0,r.useCallback)(function(o){Y(o)},[]),on=(0,r.useCallback)(function(o){var s=o.value;_((0,x.zk)(s,P))},[]),sn=function(){var s=i.current.editor.editor.querySelector(".public-DraftStyleDefault-block").innerHTML;console.log("\u{1F680} ~ file: EditComponent.tsx:132 ~ sendMsg ~ ref.current:",s)},rn=function(s){var u=l.getCurrentContent(),T=u.createEntity("IMAGE","IMMUTABLE",{src:s}),ln=T.getLastCreatedEntityKey(),dn=g.EditorState.set(l,{currentContent:T});return g.AtomicBlockUtils.insertAtomicBlock(dn,ln," ")},an=function(s){var u=URL.createObjectURL(new Blob(s));S(rn(u))},un=function(s){return s==="send-msg"?(sn(),"handled"):"not-handled"};return(0,e.jsxs)("div",{className:v.editor,onClick:function(){i.current.focus()},children:[(0,e.jsx)("div",{className:v.emojiBox,children:(0,e.jsx)(V,{})}),(0,e.jsx)(L.ZP,{editorKey:"editor",editorState:l,onChange:tn,plugins:nn,ref:i,keyBindingFn:H,handleKeyCommand:un,handlePastedFiles:an}),(0,e.jsxs)("span",{className:v.count,children:[(0,e.jsx)(z,{limit:2e4}),"/20000"]}),(0,e.jsx)(b,{}),(0,e.jsx)(q,{open:Q,onOpenChange:en,suggestions:w,onSearchChange:on,onAddMention:function(){},entryComponent:J,popoverContainer:function(s){var u=s.children;return(0,e.jsx)("div",{style:{minWidth:"100px",position:"absolute"},children:u})}})]})}},21716:function(B,d,n){n.r(d),n.d(d,{default:function(){return h}});var C=n(93236),m=n(24552),f=n(62086);function h(){return(0,f.jsx)(m.default,{})}}}]);
