"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[704,750,418,975,619],{22833:function(T,e,n){n.r(e),n.d(e,{default:function(){return M}});var c=n(52510),a=n.n(c),C=n(84875),l=n.n(C),x={avatar:"avatar___V3O9H"},m=n(62086),i;(function(t){t.CIRCLE="circle",t.SQUARE="square"})(i||(i={}));function M(t){var h=t.info.shape===i.SQUARE,s=l()({"h-8":!0,"w-8":!0,"min-w-max":!0}),y=l()(a()({"h-full w-8 bg-sky-400 content-center":!0,rounded:h,"rounded-full":!h},x.avatar,!0));if(t.info.avatar)return(0,m.jsx)("div",{className:s,children:(0,m.jsx)("img",{className:"h-full w-full",src:t.info.avatar})});var j=(t.info.nickname||t.info.name)[0];return(0,m.jsx)("div",{className:s,children:(0,m.jsx)("div",{className:y,children:j})})}},83773:function(T,e,n){n.r(e),n.d(e,{IN:function(){return c}});var c="in"},80038:function(T,e,n){n.r(e),n.d(e,{default:function(){return h}});var c=n(52510),a=n.n(c),C=n(84875),l=n.n(C),x={box:"box___k83VP",msgBox:"msgBox___CLTFk",in:"in___FxKfJ",out:"out___dQC37",system:"system___fGfxg",systemText:"systemText___emM3a"},m=n(87848),i=n(83773),M=n(22833),t=n(62086);function h(s){var y;if(s.message.type===m.MessageType.SYSTEM)return typeof s.message.message!="string"?null:(0,t.jsx)("div",{className:x.system,children:(0,t.jsx)("div",{className:x.systemText,children:s.message.message})});var j=s.message.sendType===i.IN,r=l()((y={},a()(y,x.in,j),a()(y,x.out,!j),a()(y,x.box,!0),y)),P=l()({"flex flex-col":!0,"ml-2":j,"mr-2":!j}),S=l()({"text-xs text-gray-300":!0,"text-right":!j}),o=s.member.nickname||s.member.name;return(0,t.jsxs)("div",{className:r,children:[(0,t.jsx)(M.default,{info:s.member}),(0,t.jsxs)("div",{className:P,children:[(0,t.jsx)("p",{className:S,children:o}),(0,t.jsx)("div",{className:x.msgBox,children:s.children})]})]})}},78318:function(T,e,n){n.r(e),n.d(e,{default:function(){return P}});var c=n(49084);function a(S,o,I){var O=S==null?void 0:(0,c.Z)(S,o);return O===void 0?I:O}var C=a,l=n(80038),x=n(23336),m=n(93588),i=n(94338),M=n(98857),t=n(74183),h=n(84544),s=n(74229),y=n(53056),j=n(75524),r=n(62086);function P(S){return console.log("\u{1F680} ~ file: index.tsx:18 ~ Messages ~ props:",S),C(S.list,"length")?(0,r.jsx)("div",{className:"p-4",children:S.list.map(function(o){var I=S.members.find(function(O){return O.id===o.sendId})||{id:String(+new Date),name:""};return(0,r.jsx)(l.default,{member:I,message:o,children:{system:(0,r.jsx)(x.default,{message:o}),text:(0,r.jsx)(m.default,{message:o}),voice:(0,r.jsx)(i.default,{message:o}),video:(0,r.jsx)(M.default,{message:o}),file:(0,r.jsx)(t.default,{message:o}),robot:(0,r.jsx)(h.default,{message:o}),richtext:(0,r.jsx)(s.default,{message:o}),quote:(0,r.jsx)(y.default,{message:o}),img:(0,r.jsx)(j.default,{message:o})}[o.type]},o.uuid)})}):null}},23336:function(T,e,n){n.r(e),n.d(e,{default:function(){return a}});var c=n(62086);function a(C){return(0,c.jsx)("div",{})}},24552:function(T,e,n){n.r(e),n.d(e,{default:function(){return q}});var c=n(54306),a=n.n(c),C=n(12342),l=n.n(C),x=n(57213),m=n.n(x),i=n(93236),M=n(17607),t=n(66466),h=n(22018),s=n(22978),y=n(48721),j=n(61793),r=n(85108),P=n(6420),S=n(79766),o=n(93900),I=n(80382),O=n(66680),jn=n(88825),B={editor:"editor___AcobX",emojiBox:"emojiBox___OCwv_",count:"count___gjETG",counterOverLimit:"counterOverLimit___m7ZyI"},Q={mention:"mention___e08UF",mentionSuggestions:"mentionSuggestions___xV0Oy",mentionSuggestionsEntryContainer:"mentionSuggestionsEntryContainer___RS_bu",mentionSuggestionsEntryContainerLeft:"mentionSuggestionsEntryContainerLeft___Obkfm",mentionSuggestionsEntryContainerRight:"mentionSuggestionsEntryContainerRight___aAbxo",mentionSuggestionsEntry:"mentionSuggestionsEntry___c0x64",mentionSuggestionsEntryFocused:"mentionSuggestionsEntryFocused___jKUAV",mentionSuggestionsEntryText:"mentionSuggestionsEntryText___uC5ih",mentionSuggestionsEntryTitle:"mentionSuggestionsEntryTitle___feT0M",mentionSuggestionsEntryAvatar:"mentionSuggestionsEntryAvatar___ar8FJ"},X=n(52007),U=n(87848),H=n(12881),v=n(62086),J=["mention","theme","searchValue","isFocused"],F=(0,j.Z)({useNativeArt:!0}),Y=(0,r.Z)(),z=F.EmojiSuggestions,$=F.EmojiSelect,b=(0,P.Z)({component:function(N){var d=N.href,A=(0,M.Z)(N,["className"]);return(0,v.jsx)("a",m()(m()({},A),{},{style:{color:"#5e93c5",textDecoration:"none"},onClick:function(){return window.open(d,"_blank")}}))}}),D=(0,S.Z)({theme:{counter:B.counter,counterOverLimit:B.counterOverLimit}}),p=D.CharCounter,Sn=h.KeyBindingUtil.hasCommandModifier;function k(u){return u.code==="KeyZ"?"undo":u.keyCode===13&&!u.shiftKey?"send-msg":(0,h.getDefaultKeyBinding)(u)}function w(u){var N=u.mention,d=u.theme,A=u.searchValue,K=u.isFocused,R=l()(u,J);return(0,v.jsx)("div",m()(m()({},R),{},{children:(0,v.jsx)("div",{className:d==null?void 0:d.mentionSuggestionsEntryContainer,children:(0,v.jsxs)("div",{className:d==null?void 0:d.mentionSuggestionsEntryContainerRight,children:[(0,v.jsx)("div",{className:d==null?void 0:d.mentionSuggestionsEntryText,children:N.name}),(0,v.jsx)("div",{className:d==null?void 0:d.mentionSuggestionsEntryTitle,children:N.title})]})})}))}function q(){var u=(0,i.useRef)(null),N=(0,i.useState)(function(){return h.EditorState.createEmpty()}),d=a()(N,2),A=d[0],K=d[1],R=(0,i.useState)(!1),Z=a()(R,2),_=Z[0],nn=Z[1],tn=(0,t.tT)("im.member"),W=tn.members,en=(0,t.tT)("im.message"),sn=en.setMessages,an=(0,i.useState)(W),V=a()(an,2),on=V[0],rn=V[1],G=(0,i.useMemo)(function(){var g=(0,y.ZP)({entityMutability:"IMMUTABLE",theme:Q,mentionPrefix:"@",supportWhitespace:!0}),f=g.MentionSuggestions,E=[g,F,Y,b,D];return{plugins:E,MentionSuggestions:f}},[]),dn=G.MentionSuggestions,ln=G.plugins,un=(0,i.useCallback)(function(g){K(g)},[]),mn=(0,i.useCallback)(function(g){nn(g)},[]),vn=(0,i.useCallback)(function(g){var f=g.value;rn((0,y.zk)(f,W))},[]),gn=function(){var f,E;if((f=u.current.editor.editor)!==null&&f!==void 0&&f.firstChild){var L=(0,X.createElementMap)((E=u.current.editor.editor)===null||E===void 0?void 0:E.firstChild);sn({type:U.MessageType.RICHTEXT,uuid:(0,H.Z)(),sendId:"2",send:"\u674E\u56DB",message:[L],createTime:+new Date,sendType:U.SendType.OUT})}},fn=function(f){var E=A.getCurrentContent(),L=E.createEntity("IMAGE","IMMUTABLE",{src:f}),hn=L.getLastCreatedEntityKey(),yn=h.EditorState.set(A,{currentContent:L});return h.AtomicBlockUtils.insertAtomicBlock(yn,hn," ")},cn=function(f){var E=URL.createObjectURL(new Blob(f));K(fn(E))},xn=function(f){return f==="send-msg"?(gn(),"handled"):"not-handled"};return(0,v.jsxs)("div",{className:B.editor,onClick:function(){u.current.focus()},children:[(0,v.jsx)("div",{className:B.emojiBox,children:(0,v.jsx)($,{})}),(0,v.jsx)(s.ZP,{editorKey:"editor",editorState:A,onChange:un,plugins:ln,ref:u,keyBindingFn:k,handleKeyCommand:xn,handlePastedFiles:cn}),(0,v.jsxs)("span",{className:B.count,children:[(0,v.jsx)(p,{limit:2e4}),"/20000"]}),(0,v.jsx)(z,{}),(0,v.jsx)(dn,{open:_,onOpenChange:mn,suggestions:on,onSearchChange:vn,onAddMention:function(){},entryComponent:w,popoverContainer:function(f){var E=f.children;return(0,v.jsx)("div",{style:{minWidth:"100px",position:"absolute"},children:E})}})]})}},21716:function(T,e,n){n.r(e),n.d(e,{default:function(){return l}});var c=n(93236),a=n(24552),C=n(62086);function l(){return(0,C.jsx)(a.default,{})}},86751:function(T,e,n){n.r(e),n.d(e,{default:function(){return h}});var c=n(52510),a=n.n(c),C=n(78318),l={box:"box___IpXK4",messages:"messages___GotYm",send:"send___nFnTt"},x=n(21716),m=n(84875),i=n.n(m),M=n(66466),t=n(62086);function h(){var s,y=i()((s={},a()(s,l.send,!0),a()(s,"unreset",!0),s)),j=(0,M.tT)("im.message"),r=j.messages,P=(0,M.tT)("im.member"),S=P.members;return(0,t.jsxs)("div",{className:l.box,children:[(0,t.jsx)("div",{className:l.messages,children:(0,t.jsx)(C.default,{list:r,members:S})}),(0,t.jsx)("div",{className:y,children:(0,t.jsx)(x.default,{})})]})}}}]);
