"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[521],{24552:function(dn,y,n){n.r(y),n.d(y,{default:function(){return J}});var P=n(54306),v=n.n(P),T=n(12342),B=n.n(T),F=n(57213),g=n.n(F),r=n(93236),d=n(22018),K=n(22978),f=n(48721),L=n(61793),O=n(85108),p=n(6420),b=n(79766),mn=n(93900),gn=n(80382),cn=n(66680),vn=n(88825),m={editor:"editor___AcobX",emojiBox:"emojiBox___OCwv_",count:"count___gjETG",counterOverLimit:"counterOverLimit___m7ZyI"},N={mention:"mention___e08UF",mentionSuggestions:"mentionSuggestions___xV0Oy",mentionSuggestionsEntryContainer:"mentionSuggestionsEntryContainer___RS_bu",mentionSuggestionsEntryContainerLeft:"mentionSuggestionsEntryContainerLeft___Obkfm",mentionSuggestionsEntryContainerRight:"mentionSuggestionsEntryContainerRight___aAbxo",mentionSuggestionsEntry:"mentionSuggestionsEntry___c0x64",mentionSuggestionsEntryFocused:"mentionSuggestionsEntryFocused___jKUAV",mentionSuggestionsEntryText:"mentionSuggestionsEntryText___uC5ih",mentionSuggestionsEntryTitle:"mentionSuggestionsEntryTitle___feT0M",mentionSuggestionsEntryAvatar:"mentionSuggestionsEntryAvatar___ar8FJ"},Z=n(17607),U=n(66466),e=n(62086),R=["mention","theme","searchValue","isFocused"],S=(0,L.Z)({useNativeArt:!0}),I=(0,O.Z)(),D=S.EmojiSuggestions,V=S.EmojiSelect,W=(0,p.Z)({component:function(a){var t=a.href,l=(0,Z.Z)(a,["className"]);return(0,e.jsx)("a",g()(g()({},l),{},{style:{color:"#5e93c5",textDecoration:"none"},onClick:function(){return window.open(t,"_blank")}}))}}),C=(0,b.Z)({theme:{counter:m.counter,counterOverLimit:m.counterOverLimit}}),G=C.CharCounter,Sn=d.KeyBindingUtil.hasCommandModifier;function z(i){return i.code==="KeyZ"?"undo":i.keyCode===13&&!i.shiftKey?"send-msg":(0,d.getDefaultKeyBinding)(i)}function H(i){var a=i.mention,t=i.theme,l=i.searchValue,c=i.isFocused,h=B()(i,R);return(0,e.jsx)("div",g()(g()({},h),{},{children:(0,e.jsx)("div",{className:t==null?void 0:t.mentionSuggestionsEntryContainer,children:(0,e.jsxs)("div",{className:t==null?void 0:t.mentionSuggestionsEntryContainerRight,children:[(0,e.jsx)("div",{className:t==null?void 0:t.mentionSuggestionsEntryText,children:a.name}),(0,e.jsx)("div",{className:t==null?void 0:t.mentionSuggestionsEntryTitle,children:a.title})]})})}))}function J(){var i=(0,r.useRef)(null),a=(0,r.useState)(function(){return d.EditorState.createEmpty()}),t=v()(a,2),l=t[0],c=t[1],h=(0,r.useState)(!1),E=v()(h,2),X=E[0],k=E[1],Q=(0,U.tT)("im.member"),x=Q.members,Y=(0,r.useState)(x),j=v()(Y,2),$=j[0],w=j[1],M=(0,r.useMemo)(function(){var o=(0,f.ZP)({entityMutability:"IMMUTABLE",theme:N,mentionPrefix:"@",supportWhitespace:!0}),s=o.MentionSuggestions,u=[o,S,I,W,C];return{plugins:u,MentionSuggestions:s}},[]),q=M.MentionSuggestions,_=M.plugins,nn=(0,r.useCallback)(function(o){c(o)},[]),tn=(0,r.useCallback)(function(o){k(o)},[]),en=(0,r.useCallback)(function(o){var s=o.value;w((0,f.zk)(s,x))},[]),on=function(){var s=i.current.editor.editor.querySelector(".public-DraftStyleDefault-block").innerHTML;console.log("\u{1F680} ~ file: EditComponent.tsx:132 ~ sendMsg ~ ref.current:",s)},sn=function(s){var u=l.getCurrentContent(),A=u.createEntity("IMAGE","IMMUTABLE",{src:s}),un=A.getLastCreatedEntityKey(),ln=d.EditorState.set(l,{currentContent:A});return d.AtomicBlockUtils.insertAtomicBlock(ln,un," ")},rn=function(s){var u=URL.createObjectURL(new Blob(s));c(sn(u))},an=function(s){return s==="send-msg"?(on(),"handled"):"not-handled"};return(0,e.jsxs)("div",{className:m.editor,onClick:function(){i.current.focus()},children:[(0,e.jsx)("div",{className:m.emojiBox,children:(0,e.jsx)(V,{})}),(0,e.jsx)(K.ZP,{editorKey:"editor",editorState:l,onChange:nn,plugins:_,ref:i,keyBindingFn:z,handleKeyCommand:an,handlePastedFiles:rn}),(0,e.jsxs)("span",{className:m.count,children:[(0,e.jsx)(G,{limit:2e4}),"/20000"]}),(0,e.jsx)(D,{}),(0,e.jsx)(q,{open:X,onOpenChange:tn,suggestions:$,onSearchChange:en,onAddMention:function(){},entryComponent:H,popoverContainer:function(s){var u=s.children;return(0,e.jsx)("div",{style:{minWidth:"100px",position:"absolute"},children:u})}})]})}}}]);
